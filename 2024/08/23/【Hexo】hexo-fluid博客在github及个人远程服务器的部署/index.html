

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/touxiang_yuan.png">
  <link rel="icon" href="/img/touxiang_yuan.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#00000080">
  <meta name="author" content="mRNA">
  <meta name="keywords" content="">
  
    <meta name="description" content="理论学习和动手实践是个相互纠缠穿插，贯穿始终并最终归于统一的过程             写在前面大一的暑假，也就是2024年的7月底左右，我开始了建立自己博客网站的实践。在此之前，我对相关的知识可以说是一无所知。最初当然是在网上搜素各种教程，了解到了Hexo。但是教程只能解决一部分问题，并且随着相关程序的更新迭代以及不同系统存在的差异，几乎在每个阶段我都遇到了问题。在这">
<meta property="og:type" content="article">
<meta property="og:title" content="【Hexo】hexo+fluid博客在github及个人远程服务器的部署">
<meta property="og:url" content="http://example.com/2024/08/23/%E3%80%90Hexo%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/index.html">
<meta property="og:site_name" content="mRNA的碎碎念Blog">
<meta property="og:description" content="理论学习和动手实践是个相互纠缠穿插，贯穿始终并最终归于统一的过程             写在前面大一的暑假，也就是2024年的7月底左右，我开始了建立自己博客网站的实践。在此之前，我对相关的知识可以说是一无所知。最初当然是在网上搜素各种教程，了解到了Hexo。但是教程只能解决一部分问题，并且随着相关程序的更新迭代以及不同系统存在的差异，几乎在每个阶段我都遇到了问题。在这">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/pic.jpg">
<meta property="article:published_time" content="2024-08-23T11:45:01.000Z">
<meta property="article:modified_time" content="2024-11-20T14:01:43.299Z">
<meta property="article:author" content="mRNA">
<meta property="article:tag" content="Hexo">
<meta property="article:tag" content="Fluid">
<meta property="article:tag" content="git">
<meta property="article:tag" content="Nodejs">
<meta property="article:tag" content="Github Pages">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Ubuntu">
<meta property="article:tag" content="nginx">
<meta property="article:tag" content="阿里云">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/img/pic.jpg">
  
  
  
  <title>【Hexo】hexo+fluid博客在github及个人远程服务器的部署 - mRNA的碎碎念Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/glassBg.css">
<link rel="stylesheet" href="/css/sign.css">
<link rel="stylesheet" href="/css/part-text.css">
<link rel="stylesheet" href="/css/scrollAnimation.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"§"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":"7QQkvpv88s6ADr7q2fZVkFea-gzGzoHsz","app_key":"MolQ4X8sK6wLr590un5PTi0g","server_url":"https://7qqkvpv8.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 7.3.0"></head>


<body><!-- hexo injector body_begin start --><div id="web_bg"></div><!-- hexo injector body_begin end -->
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>mRNA&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/4.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="【Hexo】hexo+fluid博客在github及个人远程服务器的部署"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        mRNA
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-08-23 19:45" pubdate>
          2024年8月23日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.9k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          41 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="leancloud-page-views"></span> 次
        </span>
        
      
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">【Hexo】hexo+fluid博客在github及个人远程服务器的部署</h1>
            
            
              <div class="markdown-body">
                
                <div class="note note-primary">
            <blockquote><p>理论学习和动手实践是个相互纠缠穿插，贯穿始终并最终归于统一的过程</p></blockquote>
          </div>

<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>大一的暑假，也就是2024年的7月底左右，我开始了建立自己博客网站的实践。在此之前，我对相关的知识可以说是一无所知。最初当然是在网上搜素各种教程，了解到了Hexo。但是教程只能解决一部分问题，并且随着相关程序的更新迭代以及不同系统存在的差异，几乎在每个阶段我都遇到了问题。<span class="label label-success">在这里我想感谢2206 kai_Ker学长，浏览学长的博客使我有了建立自己博客网站的想法，在我遇到问题难以解决时，学长很耐心地帮助我，让我对相应知识的理解更加深刻，再次感谢学长！</span>本篇我将把自己的建站过程进行梳理，对于难以解决的问题提供解决方案，希望可以帮到同样想要建站或建站过程中遇到和我相同问题的伙伴。</p>
<div class="note note-info">
            <blockquote><p>相关知识：Hexo，git，Nodejs，Fluid，GitHub Pages，Linux，Ubuntu，nginx</p></blockquote>
          </div>

<h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><h2 id="什么是Hexo"><a href="#什么是Hexo" class="headerlink" title="什么是Hexo"></a>什么是Hexo</h2><div class="note note-info">
            <blockquote><p>Hexo 是一个快速、简洁且高效的博客框架。 Hexo 使用 <a target="_blank" rel="noopener" href="http://daringfireball.net/projects/markdown/">Markdown</a>（或其他标记语言）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p></blockquote>
          </div>
<p>我们平时在浏览器中看到的网页都是由<code>html</code>这种超文本标记语言编写的，而Hexo可以理解为为我们搭建了一个可以拿过来就用的框架，并将我们用<a target="_blank" rel="noopener" href="http://daringfireball.net/projects/markdown/"><code>Markdown</code></a>（Markdown语言可点击链接阅读官方文档自行学习）这种轻量化的，简单的标记语言写成的文章渲染为html代码，呈现为网页填充在已经为我们准备好的框架里。</p>
<h2 id="运行环境和安装"><a href="#运行环境和安装" class="headerlink" title="运行环境和安装"></a>运行环境和安装</h2><p>Hexo需要配置<a target="_blank" rel="noopener" href="https://git-scm.com/"><code>Git</code></a>和<a target="_blank" rel="noopener" href="https://nodejs.org/zh-cn"><code>Nodejs</code></a>环境（建议安装最新版本,安装教程均可自行搜索，注意勾选Add to PATH等类似选项，这样可以免去自行配置环境变量等麻烦）。Git是一种分布式的版本管理工具，可以理解为一个公司的技术人员共同开发一个程序，他们所写的代码所做的改动可能都是同时进行的，Git便是解决这种问题的版本管理工具。Nodejs是一种Javascript运行环境，同时Nodejs自带的<code>npm</code>程序包管理工具可以方便地让我们安装各种依赖（可以简单理解为类似应用商店。<br>配置好Git和Nodejs环境后，我们可以在自己的本地硬盘上新建一个hexo目录，如D:&#x2F;hexo。打开目录，右键选择<code>Git Bash Here</code>即可打开Git命令行界面。<br>检查Git版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ Git --version<br></code></pre></td></tr></table></figure>

<p>检查npm版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm -v<br></code></pre></td></tr></table></figure>

<p>检查Nodejs版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ node -v<br></code></pre></td></tr></table></figure>

<p><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p1.png" srcset="/img/loading.gif" lazyload alt="示例"><br>如果成功出现以上界面，则说明环境配置成功。运行以下命令安装hexo：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm install -g hexo-cli<br></code></pre></td></tr></table></figure>

<p>（<code>-g</code>表示全局安装，<code>cli</code>为<code>Command-Line Interface</code>即命令行界面之意）<br>安装完成后输入以下命令检查版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo -v<br></code></pre></td></tr></table></figure>

<p><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p2.png" srcset="/img/loading.gif" lazyload alt="示例"><br>接下来进行初始化：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo init<br></code></pre></td></tr></table></figure>

<p>此时我们的文件夹内会出现很多文件<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p3.png" srcset="/img/loading.gif" lazyload alt="仓库下的文件"><br>输入以下指令进行缓存释放和页面渲染</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo clean&amp;&amp;hexo g<br></code></pre></td></tr></table></figure>

<div class="note note-warning">
            <p>此时我们发现文件夹下多了<span class="label label-info">public</span>文件夹,注意此文件夹为呈现的网页文件的根目录，即一切资源均从<span class="label label-info">public</span>文件夹开始寻找。故建议在<span class="label label-info">source</span>文件夹下建立<span class="label label-info">&#x2F;img</span>文件夹储存博客文章中的图片，插入图片格式例如：</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs md">![<span class="hljs-string">插入图片示例</span>](<span class="hljs-link">/img/example.jpg</span>)<br></code></pre></td></tr></table></figure>
          </div>
<p>至此，网页文件已经渲染成功，我们输入以下指令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo s<br></code></pre></td></tr></table></figure>

<p>即可打开本地服务器，打开<code>http://localhost:4000/</code>即可在本地预览网页内容。</p>
<h1 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h1><div class="note note-info">
            <p>Hexo框架有很多可供选择的主题，选择自己喜欢的主题，参考相应用户使用文档完成配置即可。以下以Fluid主题为例。</p>
          </div>
<p>在Git命令行界面输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm install --save hexo-theme-fluid<br></code></pre></td></tr></table></figure>

<p>之后创建文件_config.fluid.yml，将主题的[<code>_config.yml</code>](<a target="_blank" rel="noopener" href="https://github.com/fluid-dev/hexo-theme-fluid/blob/master/_config.yml">hexo-theme-fluid&#x2F;_config.yml at master · fluid-dev&#x2F;hexo-theme-fluid (github.com)</a>)文件内容复制进去即可。完成后如下修改目录下的_config.yml文件：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">theme:</span> <span class="hljs-string">fluid</span><br><span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span><br></code></pre></td></tr></table></figure>

<div class="note note-danger">
            <p>注意<code>.yml</code>文件缩进，冒号后应有一空格</p>
          </div>
<p>修改完成后创建<span class="label label-info">关于页</span></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new page about<br></code></pre></td></tr></table></figure>

<p>创建后修改<code>/source/about/index.md</code>,添加<code>layout</code>属性:</p>
<figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs md">---<br>title: 标题<br>date: 2024-xx-xx xx:xx:xx<br><span class="hljs-section">layout: about</span><br><span class="hljs-section">---</span><br><br>正文<br></code></pre></td></tr></table></figure>

<div class="note note-warning">
            <p>注意：不设置关于页的layout属性会无法显示布局</p>
          </div>
<div class="note note-info">
            <p>主题的自定义配置可参考<a target="_blank" rel="noopener" href="https://hexo.fluid-dev.com/docs/">Hexo Fluid 用户手册 (fluid-dev.com)</a></p>
          </div>

<hr>
<blockquote>
<p><strong>至此我们完成了hexo的本地配置和主题美化，下面我们介绍如何将本地文件推送至Github Pages和远程服务器</strong></p>
</blockquote>
<hr>
<div class="note note-primary">
            <p>为了让别人能看到我们的博客，我们需要有自己的站点。Github Pages和云服务器都是为了解决我们的这一需求。可以认为Github Pages为我们免费提供了一个站点，我们可以将自己的静态网页托管到Github，其他用户通过Github为我们提供的指定的<code>username.github.io</code>来访问我们的静态网页。当然，我们也可以购买自己的云服务器，通过Nginx等方式反向代理来呈现我们的网页。相比于Github Pages，通过国内云服务器的访问连接的稳定性和速度都会更好，当然在操作和配置上可能也会稍微麻烦一点。</p>
          </div>

<h1 id="Github-Pages"><a href="#Github-Pages" class="headerlink" title="Github Pages"></a>Github Pages</h1><p>首先我们需要一个Github账户，自行注册即可。下文涉及的<code>username</code>即为注册时的用户名。（<span class="label label-warning">国内网络访问Github连接稳定性随缘，包括前面的步骤hexo init等操作，需要在Github上将仓库资源Pull到本地，都可能因为网络问题导致失败，可以多尝试几次，也可以尝试代理方法...</span>）</p>
<h2 id="本地连接Github"><a href="#本地连接Github" class="headerlink" title="本地连接Github"></a>本地连接Github</h2><p>注册账户之后，我们怎么将本地电脑与Github相连接呢？这里我们采用<span class="label label-info">SSH连接</span>的方式。通俗来讲，我们有锁（公钥）和对应的钥匙（私钥）。我们可以把锁（公钥）交给别人，这是可以公开的，但是钥匙（私钥）必须保密，只能掌握在我们自己手里。当我们手中的钥匙和别人手中的锁可以匹配时，即可连接成功。<span class="label label-warning">注意：同一公钥可以重复使用，相当于我们的钥匙可以开很多纹路相同的锁，只要私钥不被泄露，是没有问题的</span></p>
<h3 id="配置用户名和邮箱"><a href="#配置用户名和邮箱" class="headerlink" title="配置用户名和邮箱"></a>配置用户名和邮箱</h3><p>这里我们先为Git配置用户名和邮箱，是对Git的操作。打开Git命令行输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-variable">$git</span> config --global user.name <span class="hljs-string">&quot;username&quot;</span> <span class="hljs-comment"># 这里username输入自己的用户名，不必须但建议与自己的Github用户名保持一致</span><br><span class="hljs-variable">$git</span> config --global user.email <span class="hljs-string">&quot;user@example.com&quot;</span> <span class="hljs-comment"># 这里user@example.com输入自己的邮箱，同上</span><br></code></pre></td></tr></table></figure>

<h3 id="生成密钥"><a href="#生成密钥" class="headerlink" title="生成密钥"></a>生成密钥</h3><p>我们通过<code>win</code>+<code>R</code>，输入<code>cmd</code>打开命令行（区别于Git Bash Here打开的Git命令行，称为命令行），输入以下命令产生公钥和私钥：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">ssh-keygen -t rsa -C <span class="hljs-string">&quot;Github邮箱地址&quot;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>这里<code>-C “user@example.com”</code>为注释（Comment），添加在私钥文件中，可以辅助Github更好地识别私钥，可以省略。</p>
</blockquote>
<p>出现的选项均回车即可（选择密钥位置，私钥使用密码，确认私钥使用密码，均回车后密钥保存在默认位置，使用私钥不需要密码）。然后我们打开<code>C:\Users\用户名\.ssh</code>目录，勾选“显示隐藏项目”后，出现：<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p4.png" srcset="/img/loading.gif" lazyload alt=".ssh目录"><br>记事本打开<code>id_rsa.pub</code>文件后复制文件内容</p>
<h3 id="添加密钥"><a href="#添加密钥" class="headerlink" title="添加密钥"></a>添加密钥</h3><p>进入Github主页，点击Settings</p>
<blockquote>
<p>题外话，我在预载《黑神话：悟空》的时候，忘记关闭代理，导致我的代理流量跑光，所以我在写这篇博客的时候也遇到了Github难以进入的问题，所以我选择用当初为了加速Steam安装的加速器Watt Toolkit（Steam++）加速Github，我觉得可以算是羊毛出在羊身上了。</p>
</blockquote>
<p><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p5.png" srcset="/img/loading.gif" lazyload alt="Github"><br>点击SSH and GPG keys<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p6.png" srcset="/img/loading.gif" lazyload alt="Github"><br>点击New SSH key<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p7.png" srcset="/img/loading.gif" lazyload alt="Github"><br>Title随便取，Key type选择Authentication Key，Key中内容粘贴之前复制的id_rsa.pub文件内容即可。<br>保存后在命令行输入：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">ssh -T git@github.com<br></code></pre></td></tr></table></figure>

<p>输入后出现“Are you sure you want to continue connecting”，输入“yes”即可。连接成功后出现以下提示：<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p8.png" srcset="/img/loading.gif" lazyload alt="连接成功"></p>
<h2 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h2><p>点击Repository，点击新建仓库<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p9.png" srcset="/img/loading.gif" lazyload alt="Repository"><br>新建仓库界面注意：</p>
<ul>
<li>Repository Name必须是<code>用户名.github.io</code>，这是Github为我们准备好的特殊仓库名称。</li>
<li>仓库类型选择<code>Public</code></li>
<li>勾选<code>Add a README file</code><br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p10.png" srcset="/img/loading.gif" lazyload alt="Repository"><div class="note note-warning">
            <p>处于文明及历史原因，Github新建仓库默认分支现名为<code>main</code>，替代之前的<code>master</code>。</p>
          </div></li>
</ul>
<h2 id="静态网站文件推送至Github远程仓库"><a href="#静态网站文件推送至Github远程仓库" class="headerlink" title="静态网站文件推送至Github远程仓库"></a>静态网站文件推送至Github远程仓库</h2><p>我们首先安装hexo部署插件，在hexo目录下打开Git命令行，输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure>

<p>打开hexo目录下的<code>_config.yml</code>文件，修改配置：<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p11.png" srcset="/img/loading.gif" lazyload alt="deploy配置"></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br><span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:username/username.github.io.git</span><br><span class="hljs-attr">branch:</span> <span class="hljs-string">main</span><br></code></pre></td></tr></table></figure>

<p>其中<code>type</code>为配置类型，<code>repo</code>为仓库位置，这里我们已经通过SSH连接，<code>branch</code>为提交分支，我们选择Github默认的<code>main</code>分支。<br>配置完成后保存退出，在hexo目录打开Git命令行，输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo clean<br>$ hexo g<br>$ hexo d<br></code></pre></td></tr></table></figure>

<p>打开网址<code>username.github.io</code>，刷新一下即可看到博客网页。</p>
<hr>
<blockquote>
<p><strong>至此我们已可以通过<code>username.github.io</code>访问我们的博客网页，目前仍然是0成本。下面介绍的在远程云服务器上部署博客网页需要购买云服务器和域名，并且需要进行Linux系统上的命令行操作。</strong></p>
</blockquote>
<hr>
<div class="note note-primary">
            <p>我购买的是阿里云ECS服务器最基础的2核2G版本，装载的Linux发行版系统镜像为<code>Ubuntu 22.04</code>版本，以下教程适合于同样搭载<code>Ubuntu</code>或<code>Debian</code>的服务器，因为Debian和基于Debian的Ubuntu搭载的软件包管理工具为<code>apt</code>，而CentOS等其他发行版本搭载的软件包管理工具为<code>yum</code>。所以安装Ubuntu&#x2F;Debian的uu在查阅其他教程时会发现无法执行<code>sudo yum install -y nginx</code>命令的情况，不建议因此在Ubuntu上安装yum，这就像在安卓手机上安装苹果App Store，将命令改为<code>sudo apt-get install -y nginx</code>即可。在服务器上创建实例时，添加安全组时，由于我们需要通过SSH方式与本地连接，因此需要勾选<code>SSH(22)</code>端口，同时为了保证使用HTTP和HTTPS协议能够访问服务器，我们需要勾选<code>HTTP(80)</code>和<code>HTTPS(443)</code>端口，其余端口如<code>MySQL(3306)</code>,<code>Redis(6379)</code>等也可以勾选。</p>
          </div>

<h1 id="云服务器配置"><a href="#云服务器配置" class="headerlink" title="云服务器配置"></a>云服务器配置</h1><p>我们的整体思路是，在服务器上配置Git，并且将本地与服务器上的远程仓库相连接，通过将本地静态文件以Git形式推送到远程仓库，并通过钩子自动将网页文件检出到工作目录下，通过Nginx反向代理将我们的静态网页文件呈现在Web界面上。</p>
<h2 id="创建博客根目录"><a href="#创建博客根目录" class="headerlink" title="创建博客根目录"></a>创建博客根目录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /home<br>mkdir www<br>cd /www<br>mkdir blog<br></code></pre></td></tr></table></figure>

<h2 id="Nodejs及Nginx环境安装"><a href="#Nodejs及Nginx环境安装" class="headerlink" title="Nodejs及Nginx环境安装"></a>Nodejs及Nginx环境安装</h2><p>安装Nodejs及Nginx：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install nodejs<br>sudo apt-get install nginx<br></code></pre></td></tr></table></figure>

<p>安装后检查版本号:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">node -v<br>nginx -v<br></code></pre></td></tr></table></figure>

<h2 id="Git配置"><a href="#Git配置" class="headerlink" title="Git配置"></a>Git配置</h2><h3 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h3><p>首先我们切换到超级用户<code>root</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo su root<br></code></pre></td></tr></table></figure>

<p>安装Git：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">apt-get install git<br></code></pre></td></tr></table></figure>

<p>安装成功后，检查版本号，输入：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git --version<br></code></pre></td></tr></table></figure>

<p><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p12.png" srcset="/img/loading.gif" lazyload alt="Git安装成功"></p>
<h3 id="添加账户"><a href="#添加账户" class="headerlink" title="添加账户"></a>添加账户</h3><p>为服务器添加名为<code>git</code>的用户：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">adduser git<br></code></pre></td></tr></table></figure>

<h3 id="修改权限"><a href="#修改权限" class="headerlink" title="修改权限"></a>修改权限</h3><p>添加后修改用户权限，使git用户能通过<code>sudo</code>以root用户身份来执行命令。为了修改配置用户权限的文件<code>/etc/sudoers</code><br>输入以下命令更改权限：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">chmod 640 /etc/sudoers<br></code></pre></td></tr></table></figure>
<div class="note note-info">
            <p>这里<code>chmod</code>为修改权限指令，<code>640</code>中每一位分别表示不同类别用户权限，第一位为<code>文件/目录所有者（User）</code>，第二位为<code>文件/目录所属用户组（Group）</code>，第三位为<code>其他用户（Others）</code>。每一位的数字为权限所对应的二进制数字的十进制值，最大值为<code>7</code>，即<code>rwx</code>，其中<code>r</code>,<code>w</code>,<code>x</code>分别表示<code>读</code>,<code>写</code>,<code>执行</code>等。这里的<code>6</code>即为<code>110</code>，即<code>rw-</code>表示所有者（root）具有<code>写</code>和<code>读</code>的权限。</p>
          </div>
<p>打开该文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/sudoers<br></code></pre></td></tr></table></figure>

<p>如图所示添加以下代码（进入Vim编辑器后按下键盘上的<code>I</code>，进入编辑模式（<code>INSERT</code>）。编辑完成后按下<code>Esc</code>，键入<code>:wq</code>保存并退出，其中<code>w</code>为保存，<code>q</code>为退出）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git ALL=(ALL:ALL)ALL<br></code></pre></td></tr></table></figure>

<p><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p13.png" srcset="/img/loading.gif" lazyload alt="sudoers文件更改"></p>
<div class="note note-info">
            <p>这里表示<code>git</code>用户在任何主机（第一个ALL），都可以以任何身份（第二个ALL），作为任何一个用户组的成员（第三个ALL），执行任何命令（第四个ALL）。添加后git用户可通过<code>sudo</code>命令以root身份发布指令。</p>
          </div>
<p>保存并退出后将目录权限修改回去：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">chmod 400 /etc/sudoers<br></code></pre></td></tr></table></figure>

<h3 id="设置密码"><a href="#设置密码" class="headerlink" title="设置密码"></a>设置密码</h3><p>为git用户设置密码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">passwd git<br></code></pre></td></tr></table></figure>

<div class="note note-warning">
            <p>注意：输入密码时不会显示，输入完成后按下回车键即可</p>
          </div>

<h3 id="配置密钥"><a href="#配置密钥" class="headerlink" title="配置密钥"></a>配置密钥</h3><p>首先切换到git用户,并切至git主目录（&#x2F;home&#x2F;git），创建目录<code>.ssh</code>并进入,进入后生成密钥：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">su git #切换账户<br>cd ~ #切至主目录<br>mkdir .ssh #新建目录<br>cd .ssh #进入目录<br>ssh-keygen #生成密钥<br></code></pre></td></tr></table></figure>

<p>同上，按三次回车，在默认位置生成没有密码的密钥。<br>之后执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd ~/.ssh<br>cp id_rsa.pub authorized_keys<br></code></pre></td></tr></table></figure>

<p>将<code>id_rsa.pub</code>复制到<code>authorized_keys</code>中，目录下会产生一个<code>authorized_keys</code>文件。<br>修改<code>authorized_keys</code>文件和<code>.ssh</code>目录权限：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">chmod 600 ~/.ssh/authorized_keys<br>chmod 700 ~/.ssh<br></code></pre></td></tr></table></figure>

<p>之后打开之前在<strong>本地</strong>生成的公钥文件<code>id_rsa.pub</code>，复制内容，然后编辑服务器<code>authorized_keys</code>文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim ~/.ssh/authorized_keys<br></code></pre></td></tr></table></figure>

<p>换行后粘贴本地公钥至其末尾：<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p14.png" srcset="/img/loading.gif" lazyload alt="授权公钥"></p>
<h3 id="远程连接"><a href="#远程连接" class="headerlink" title="远程连接"></a>远程连接</h3><p>打开本地命令行（<code>win</code>+<code>R</code>输入<code>cmd</code>），输入以下命令远程连接服务器git账户：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh -v git@服务器公网IP<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p><code>-v</code>意为以详细模式（verbose mode）打开，可省略</p>
          </div>
<p>出现以下提示，即连接成功：<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p15.png" srcset="/img/loading.gif" lazyload alt="远程连接成功"></p>
<h2 id="仓库配置"><a href="#仓库配置" class="headerlink" title="仓库配置"></a>仓库配置</h2><p>首先切换至git账户：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">su git<br></code></pre></td></tr></table></figure>

<p>创建仓库目录和钩子文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd ~ # 进入主目录<br>git init --bare blog.git # 初始化裸仓库blog.git<br>chown -R git:git blog.git # 递归地更改所有者为git，所属组为git<br>vim ~/blog.git/hooks/post-receive # 创建并编辑钩子<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>钩子（hooks）可理解为在进行某种Git操作时自动触发的脚本，我们通过钩子来使仓库分支发生变更时自动将文件检出至工作目录下，实现自动更新的目的。</p>
          </div>

<p>编辑post-receive内容为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br>git --work-tree=/home/www/blog --git-dir=/home/git/blog.git checkout -f<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>脚本中，工作目录设置为<code>/home/www/blog</code>，仓库目录设置为<code>/home/git/blog.git</code>，<code>checkout</code>为检出操作，将仓库中文件检出至工作目录，<code>-f</code>意为强制执行。</p>
          </div>
<p>赋予钩子可执行权限和<code>/home/www/blog</code>目录可写权限：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo chmod +x ~/blog.git/hooks/post-receive<br>sudo chmod +x go+w /home/www/blog<br></code></pre></td></tr></table></figure>

<p>为了使我们的钩子脚本能够正常执行，我们还需要配置仓库的<code>dentCurrentBranch</code>选项：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /home/git/blog.git/config<br></code></pre></td></tr></table></figure>

<p>打开文件后在文件末尾添加：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[receive]</span><br>	<span class="hljs-attr">denyCurrentBranch</span> = ignore<br></code></pre></td></tr></table></figure>

<p><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p16.png" srcset="/img/loading.gif" lazyload alt="接收推送"></p>
<div class="note note-danger">
            <p>在 Git 的早期版本中，默认的行为是禁止向当前检出的分支推送新提交，以防止“非快进式”(non-fast-forward)的推送覆盖掉远程仓库中其他人可能正在工作的内容。这是因为如果远程仓库的分支被意外覆盖，那么正在该分支上工作的其他用户可能会丢失他们的工作。所以我们需要关闭<code>denyCurrentBranch</code>，我们的钩子脚本才能正常执行。</p>
          </div>
<div class="note note-info">
            <p>检查钩子脚本是否正常执行，可以在<code>/home/git(或其他位置)</code>新建一个<code>check.txt</code>文本文件(<code>vim /home/git/check.txt</code>)，在<code>post-receive</code>钩子中添加一行<code>echo &quot;okk&quot; &gt;&gt; /home/git/check.txt</code>，检查文本文件内容判断钩子文件是否执行。</p>
          </div>

<h2 id="Nginx代理配置"><a href="#Nginx代理配置" class="headerlink" title="Nginx代理配置"></a>Nginx代理配置</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><p>首先我们先来了解Nginx目录下相关目录和文件：<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p17.png" srcset="/img/loading.gif" lazyload alt="Nginx目录"></p>
<ul>
<li><code>nginx.conf</code>为配置文件，其内容中<ul>
<li><code>include /etc/nginx/conf.d/*.conf;</code> 意为包含&#x2F;etc&#x2F;nginx&#x2F;conf.d目录下所有以.conf为后缀的文件。</li>
<li><code>include /etc/nginx/sites-enabled/*;</code>意为包含&#x2F;etc&#x2F;nginx&#x2F;sites-enabled目录下所有文件。</li>
</ul>
</li>
<li><code>sites-available</code>为监听的所有请求。</li>
<li><code>sites-enabled</code>为允许访问的所有请求，其内容为指向<code>sites-available</code>中文件的软链接。<div class="note note-danger">
            <p>注意：可自行阅读<code>sites-available</code>中的<code>default</code>默认文件，之后删除<code>sites-available</code>中的<code>default</code>文件和<code>sites-enabled</code>中对应的<code>default</code>链接。因为<code>default</code>中默认的根目录为<code>var/www/index.html</code>，并且<code>default</code>链接是被<code>nginx.conf</code>include在内的，如果不删除，访问服务器公网地址仅能看见Nginx默认的欢迎页面。</p>
          </div></li>
</ul>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>我们来配置访问请求对应服务，下面所举的例子均以我的域名<code>mrna16.top</code>为例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/nginx/sites-available/mrna16<br></code></pre></td></tr></table></figure>

<p>编辑内容为：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123; <br>        <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>; <br>        <span class="hljs-attribute">server_name</span> mrna16.top; <br>        <span class="hljs-attribute">root</span> /home/www/blog;<br>         <span class="hljs-attribute">index</span> index.html; <br>         <span class="hljs-section">location</span> / &#123; <br>         <span class="hljs-attribute">try_files</span> <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =<span class="hljs-number">404</span>; <br>         &#125; <br>&#125;<br></code></pre></td></tr></table></figure>

<p>为了能使<code>www.mrna16.top</code>也能访问：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/nginx/sites-available/wwwmrna16<br></code></pre></td></tr></table></figure>

<p>编辑内容为：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">server</span> &#123; <br>        <span class="hljs-attribute">listen</span> <span class="hljs-number">80</span>; <br>        <span class="hljs-attribute">server_name</span> www.mrna16.top; <br>        <span class="hljs-attribute">root</span> /home/www/blog;<br>         <span class="hljs-attribute">index</span> index.html; <br>         <span class="hljs-section">location</span> / &#123; <br>         <span class="hljs-attribute">try_files</span> <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ =<span class="hljs-number">404</span>; <br>         &#125; <br>&#125;<br></code></pre></td></tr></table></figure>

<p>完成编辑后我们通过以下命令在<code>sites-enabled</code>目录中产生软链接：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo ln -s /etc/nginx/sites-available/mrna /etc/nginx/sites-enabled/mrna  <br>sudo ln -s /etc/nginx/sites-available/wwwmrna /etc/nginx/sites-enabled/wwwmrna<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p><code>-s</code>即为产生软链接&#x2F;符号链接（symbolic link）。我们的文件都在磁盘中放置，想要找到某一文件，我们需要知道它的索引，当索引条数为0时，文件将无法找到，内核将文件内容从磁盘上删除（多个文件名可以指向同一索引节点，类似链表）。硬链接就相当于链接到这里的索引节点，而软链接则相当于创建一个新的文件，作为索引的指针，记录索引的位置，当我们访问软链接时，获取到的是索引，系统通过索引再找到真正想要访问的文件。形象地说，我们的文件就像药店的药材，放在不同的抽屉里，硬链接相当于给抽屉贴上标签，标明什么药在抽屉里；软链接则相当于拿一张纸，专门来记录哪味药在哪个抽屉里。药换位置，标签换位置，但是纸上记下的信息没有改变。软硬链接各有特点。<br>硬链接：</p><ul><li>无法给目录创建硬链接</li><li>硬链接无法跨文件系统访问</li><li>文件位置移动时，硬链接仍然可以访问到</li><li>硬链接大小和文件大小相同<br>软链接：</li><li>可以给目录创建软链接</li><li>软连接可以跨文件系统甚至跨设备访问</li><li>文件位置移动，软连接无法访问</li><li>软链接需要系统额外分配空间建立索引节点和存储文件路径</li><li>软链接不会增加文件的索引条数</li></ul>
          </div>

<h2 id="本地推送"><a href="#本地推送" class="headerlink" title="本地推送"></a>本地推送</h2><p>打开hexo目录下的<code>_config.yml</code>，修改<code>deploy</code>选项：<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p11.png" srcset="/img/loading.gif" lazyload alt="deploy配置"></p>
<div class="note note-info">
            <p>@后为服务器公网IP</p>
          </div>
<p>保存后，在hexo目录下打开Git命令行，输入命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo clean<br>$ hexo g<br>$ hexo d<br></code></pre></td></tr></table></figure>

<p>出现以下提示则推送成功：<br><img src="/img/%E3%80%90%E5%AD%A6%E4%B9%A0%E3%80%91hexo-fluid%E5%8D%9A%E5%AE%A2%E5%9C%A8github%E5%8F%8A%E4%B8%AA%E4%BA%BA%E8%BF%9C%E7%A8%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%83%A8%E7%BD%B2/p18.png" srcset="/img/loading.gif" lazyload alt="推送成功"></p>
<hr>
<p> <em><strong>完</strong></em></p>
<div class="note note-success">
            <p>这是我的第一篇技术博客，经验不足，还望多多包涵。如果这篇文章能帮到你，那就太好了！如果对于文章内容有问题和建议，欢迎移步<a href="/about/index.html">关于页</a>获取我的联系方式，感谢批评指正，期待多多交流！</p>
          </div>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%8A%80%E6%9C%AF/" class="category-chain-item">技术</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Hexo/" class="print-no-link">#Hexo</a>
      
        <a href="/tags/Fluid/" class="print-no-link">#Fluid</a>
      
        <a href="/tags/git/" class="print-no-link">#git</a>
      
        <a href="/tags/Nodejs/" class="print-no-link">#Nodejs</a>
      
        <a href="/tags/Github-Pages/" class="print-no-link">#Github Pages</a>
      
        <a href="/tags/Linux/" class="print-no-link">#Linux</a>
      
        <a href="/tags/Ubuntu/" class="print-no-link">#Ubuntu</a>
      
        <a href="/tags/nginx/" class="print-no-link">#nginx</a>
      
        <a href="/tags/%E9%98%BF%E9%87%8C%E4%BA%91/" class="print-no-link">#阿里云</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>【Hexo】hexo+fluid博客在github及个人远程服务器的部署</div>
      <div>http://example.com/2024/08/23/【Hexo】hexo-fluid博客在github及个人远程服务器的部署/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>mRNA</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年8月23日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/10/24/%E3%80%90CO%E3%80%91P3%E8%AF%BE%E4%B8%8B--%E5%8D%95%E5%91%A8%E6%9C%9FCPU(Logisim%E5%AE%9E%E7%8E%B0)/" title="【CO】P3课下——单周期CPU(Logisim实现)">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">【CO】P3课下——单周期CPU(Logisim实现)</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/08/06/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E5%BB%BA%E7%AB%99/" title="【随笔】建站">
                        <span class="hidden-mobile">【随笔】建站</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  

</div>

  
  
    <!-- 备案信息 ICP for China -->
    <div class="beian">
  <span>
    <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
      鲁ICP备2024114151号
    </a>
  </span>
  
    
      <span>
        <a
          href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=京公网安备11010802044882号"
          rel="nofollow noopener"
          class="beian-police"
          target="_blank"
        >
          
            <span style="visibility: hidden; width: 0">|</span>
            <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
          
          <span>京公网安备11010802044882号</span>
        </a>
      </span>
    
  
</div>

  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
<!-- hexo injector body_end start --><script src="/js/backgroundize.js"></script><script src="/js/snow.js"></script><script src="/js/title.js"></script><script src="/js/sign.js"></script><script src="/js/scrollAnimation.js"></script><script src="/js/time-insert.js"></script><script src="/js/time.js"></script><!-- hexo injector body_end end --></body>
</html>
